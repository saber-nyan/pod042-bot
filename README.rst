pod042-bot
##########

Бесполезный Telegram-бот. Для меня, тебя и того парня в пакете. Подтверждена работа под M$® Windows™!

Имеет смысл использовать в групповых чатах.

Можно попробовать здесь: `@pod042_bot <https://t.me/pod042_bot>`_

.. image:: https://i.imgur.com/ORL9f5E.png

Используется `pyTelegramBotAPI <https://github.com/eternnoir/pyTelegramBotAPI>`_,
`vk_api <https://github.com/python273/vk_api>`_,
`tproger <https://tproger.ru/wp-content/plugins/citation-widget/getQuotes.php>`_,
`whatanime.ga <https://whatanime.ga>`_, `baneks.ru <https://baneks.ru>`_.

*********
Что может
*********
+----------------------+--------------------------+---------------------------------+---------------------------------------------------+
| Команда              | Аргумент                 | Описание                        | Пример вывода                                     |
+======================+==========================+=================================+===================================================+
| ``codfish``          | * @username              | Бьет пользователя треской!      | * Укажи юзернейм кого бить!                       |
|                      | * username               | А еще с няшной вебмкой.         | * Хорошенько шлепнул себя треской.                |
|                      |                          | Имя берет из профиля.           | * Хорошенько шлепнул saber-nyan треской.          |
+----------------------+--------------------------+---------------------------------+---------------------------------------------------+
| Inline               | Название звука           | Простенький soundboard.         |                                                   |
+----------------------+--------------------------+---------------------------------+---------------------------------------------------+
| ``abort``            |                          | Отменяет выполняемую            | * Отменено.                                       |
|                      |                          | команду.                        | * Я ничем не занят!                               |
+----------------------+--------------------------+---------------------------------+---------------------------------------------------+
| ``config_vk``        |                          | Настройка модуля ВКонтакте      |                                                   |
|                      |                          | (для постинга контента из       |                                                   |
|                      |                          | сообществ)                      |                                                   |
+----------------------+--------------------------+---------------------------------+---------------------------------------------------+
| ``vk_pic``           |                          | Ворует случайную картинку       | * *ссылка картинки* Из: *ссылка группы*           |
|                      |                          | из настроенных групп ВК         |                                                   |
+----------------------+--------------------------+---------------------------------+---------------------------------------------------+
| ``quote``            |                          | Ворует цитату с                 | * Переустановил ей Windows. Даже спасибо не дала. |
|                      |                          | *tproger.ru*                    |                                                   |
+----------------------+--------------------------+---------------------------------+---------------------------------------------------+
| ``anek``             |                          | Ворует анекдот с                | * Буратино утонул.                                |
|                      |                          | *baneks.ru*                     | * Колобок повесился.                              |
+----------------------+--------------------------+---------------------------------+---------------------------------------------------+
| ``whatanime``        | Следующим сообщением     | Ищет аниме по скриншоту с       |                                                   |
|                      | ссылку или скриншот      | помощью whatanime.ga            |                                                   |
+----------------------+--------------------------+---------------------------------+---------------------------------------------------+
| ``eval``             | Строчка кода             | Для админа: выполнить eval      |                                                   |
+----------------------+--------------------------+---------------------------------+---------------------------------------------------+
| ``list_chats``       |                          | Для админа: показать чаты       | 109931351: saber_nyan, state Нет                  |
+----------------------+--------------------------+---------------------------------+---------------------------------------------------+
| ``send_msg``         | chat_id сообщение        | Для админа: отправить сообщение |                                                   |
+----------------------+--------------------------+---------------------------------+---------------------------------------------------+

::

> И это все?!
> WIP!

*********
Установка
*********
Требуется `git-lfs <https://github.com/git-lfs/git-lfs/wiki/Installation>`_!
""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""

.. code-block:: bash

    # Рекомендую завести virtualenv
    $ virtualenv3 ./venv
    $ source ./venv/bin/activate

    # Клонируем репозиторий, устанавливаем в virtualenv
    $ git lfs clone https://github.com/saber-nyan/pod042-bot.git
    $ cd pod042-bot
    $ pip install . # Или python ./setup.py install

    # Настраиваем бота. Эти обязательны, еще несколько устанавливаемых значений смотрите в congig.py
    $ export BOT_TOKEN='123456789:aBcDeEf3fdovmmcmWimldmsvklnlnNdnmNj' # Токен, полученный у @BotFather
    # Это опционально, но желательно
    $ export VK_LOGIN='+79261112345' # Логин ВКонтакте. Лучше телефон фейка, есть ненулевая вероятность быть забаненым
    $ export VK_PASSWORD='************' # Пароль ВКонтакте. Эти данные необходимы для работы /vk_pic, увы ¯\_(ツ)_/¯
    $ export WHATANIME_TOKEN='**************' # Токен whatanime.ga. Необходим для работы /whatanime

    # Запускаем!
    $ python -m pod042-bot

    # Кстати, теперь в комплекте поставляется файл systemd unit. Рекомендую им воспользоваться - автоперезапуск!
    $ sudo cp ./pod042_bot.service /etc/systemd/system/
    # Для корректной работы его содержимое необходимо отредактировать. Внутри все расписано, бгг
    $ sudo nano /etc/systemd/system/pod042_bot.service

    # Тестируем. При ошибках смотрите `systemctl status pod042_bot`
    $ sudo systemctl start pod042_bot
    # Если все прошло успешно - добавляем в автозапуск
    $ sudo systemctl enable pod042_bot
